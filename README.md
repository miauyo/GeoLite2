# GeoLite2 æ•°æ®åº“

è‡ªåŠ¨ä» MaxMind å®˜ç½‘ä¸‹è½½å’Œå‘å¸ƒ GeoLite2 æ•°æ®åº“ï¼ˆASNã€City å’Œ Countryï¼‰

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### â° è‡ªåŠ¨åŒ–è°ƒåº¦
- **å®šæ—¶æ›´æ–°**: æ¯å‘¨å›› 00:00 UTC è‡ªåŠ¨æ‰§è¡Œ
- **æ‰‹åŠ¨è§¦å‘**: æ”¯æŒæ‰‹åŠ¨è§¦å‘ä»¥ä¾¿æµ‹è¯•å’Œç´§æ€¥æ›´æ–°
- **å¼ºåˆ¶æ›´æ–°**: å¯é€‰æ‹©å¿½ç•¥ç‰ˆæœ¬æ£€æŸ¥å¼ºåˆ¶æ›´æ–°

### ğŸ“Š æ™ºèƒ½ç‰ˆæœ¬ç®¡ç†
- **ç‰ˆæœ¬æ£€æŸ¥**: ä»…åœ¨æœ‰æ–°ç‰ˆæœ¬æ—¶æ‰æ‰§è¡Œä¸‹è½½
- **è‡ªåŠ¨ç‰ˆæœ¬å·**: åŸºäºæ•°æ®åº“å‘å¸ƒæ—¥æœŸç”Ÿæˆç‰ˆæœ¬å·
- **ç‰ˆæœ¬å†å²**: è‡ªåŠ¨ä¿ç•™æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬

### ğŸ” å®‰å…¨ä¸å®Œæ•´æ€§
- **æ–‡ä»¶æ ¡éªŒ**: MD5 å’Œ SHA256 å®Œæ•´æ€§éªŒè¯
- **æ•æ„Ÿæ•°æ®ä¿æŠ¤**: ä½¿ç”¨ GitHub Secrets å­˜å‚¨ API å¯†é’¥
- **æƒé™æ§åˆ¶**: æœ€å°å¿…è¦æƒé™åŸåˆ™
- **è‡ªåŠ¨æ¸…ç†**: æ‰§è¡Œåè‡ªåŠ¨æ¸…ç†æ•æ„Ÿæ•°æ®

### ğŸ“¦ æ–‡ä»¶å¤„ç†
- **å¤šæ ¼å¼æ”¯æŒ**: æä¾› tar.gz å’Œ zip ä¸¤ç§æ ¼å¼
- **å‹ç¼©ä¼˜åŒ–**: ä½¿ç”¨ gzip å‹ç¼©èŠ‚çœå­˜å‚¨ç©ºé—´
- **å®Œæ•´æ‰“åŒ…**: å°†ä¸‰ä¸ªæ•°æ®åº“æ–‡ä»¶æ‰“åŒ…ä¸ºå•ä¸€å½’æ¡£

### ğŸ“ è¯¦ç»†æ—¥å¿—
- **æ‰§è¡ŒçŠ¶æ€**: æ¸…æ™°çš„æ­¥éª¤çŠ¶æ€æ˜¾ç¤º
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- **é€šçŸ¥åŠŸèƒ½**: å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€é€šçŸ¥

## ğŸ› ï¸ è®¾ç½®è¯´æ˜

### 1. è·å– MaxMind è®¸å¯è¯å¯†é’¥

1. è®¿é—® [MaxMind å®˜ç½‘](https://www.maxmind.com/en/geolite2/signup)
2. æ³¨å†Œå…è´¹è´¦æˆ·
3. ç™»å½•åè¿›å…¥ "My License Key" é¡µé¢
4. ç”Ÿæˆæ–°çš„è®¸å¯è¯å¯†é’¥

### 2. é…ç½® GitHub Secrets

åœ¨æ‚¨çš„ GitHub ä»“åº“ä¸­è®¾ç½®ä»¥ä¸‹ Secretsï¼š

1. è¿›å…¥ä»“åº“çš„ **Settings** â†’ **Secrets and variables** â†’ **Actions**
2. ç‚¹å‡» **New repository secret**
3. æ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š

| å¯†é’¥åç§° | æè¿° | å¿…éœ€ |
|---------|------|------|
| `MAXMIND_LICENSE_KEY` | MaxMind è®¸å¯è¯å¯†é’¥ | âœ… |

### 3. å¯ç”¨ GitHub Actions

1. ç¡®ä¿ä»“åº“å¯ç”¨äº† GitHub Actions
2. å·¥ä½œæµæ–‡ä»¶ä½äº `.github/workflows/update-geolite2.yml`
3. é¦–æ¬¡è¿è¡Œå¯ä»¥æ‰‹åŠ¨è§¦å‘è¿›è¡Œæµ‹è¯•

## ğŸ“‹ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨æ‰§è¡Œ
å·¥ä½œæµå°†åœ¨æ¯å‘¨å›› 00:00 UTC è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚

### æ‰‹åŠ¨è§¦å‘
1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾é¡µ
2. é€‰æ‹© "Update GeoLite2 Databases" å·¥ä½œæµ
3. ç‚¹å‡» **Run workflow**
4. å¯é€‰æ‹©ä»¥ä¸‹é€‰é¡¹ï¼š
   - **å¼ºåˆ¶æ›´æ–°**: å¿½ç•¥ç‰ˆæœ¬æ£€æŸ¥ï¼Œå¼ºåˆ¶ä¸‹è½½æœ€æ–°æ•°æ®
   - **è·³è¿‡æ¸…ç†**: ä¿ç•™æ‰€æœ‰å†å²ç‰ˆæœ¬ï¼Œä¸æ‰§è¡Œè‡ªåŠ¨æ¸…ç†

### ä¸‹è½½æ•°æ®åº“
1. è¿›å…¥ä»“åº“çš„ **Releases** é¡µé¢
2. é€‰æ‹©æœ€æ–°ç‰ˆæœ¬
3. ä¸‹è½½é€‚åˆæ‚¨ç³»ç»Ÿçš„å½’æ¡£æ–‡ä»¶ï¼š
   - `GeoLite2-Databases-vYYYYMMDD.tar.gz` (Linux/macOS)
   - `GeoLite2-Databases-vYYYYMMDD.zip` (Windows)

## ğŸ“ æ–‡ä»¶ç»“æ„

ä¸‹è½½çš„å½’æ¡£æ–‡ä»¶åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

```
GeoLite2-Databases-vYYYYMMDD/
â”œâ”€â”€ GeoLite2-ASN.mmdb          # ASN æ•°æ®åº“
â”œâ”€â”€ GeoLite2-City.mmdb         # åŸå¸‚æ•°æ®åº“
â”œâ”€â”€ GeoLite2-Country.mmdb      # å›½å®¶æ•°æ®åº“
â”œâ”€â”€ checksums.txt              # æ–‡ä»¶æ ¡éªŒå’Œ
â””â”€â”€ README.md                  # ä½¿ç”¨è¯´æ˜
```

## ğŸ” æ–‡ä»¶å®Œæ•´æ€§éªŒè¯

æ¯ä¸ªå‘å¸ƒåŒ…éƒ½åŒ…å« `checksums.txt` æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥éªŒè¯ä¸‹è½½æ–‡ä»¶çš„å®Œæ•´æ€§ï¼š

### Linux/macOS
```bash
# éªŒè¯ MD5
md5sum -c checksums.txt

# éªŒè¯ SHA256
sha256sum -c checksums.txt
```

### Windows (PowerShell)
```powershell
# éªŒè¯ MD5
Get-FileHash -Algorithm MD5 *.mmdb

# éªŒè¯ SHA256
Get-FileHash -Algorithm SHA256 *.mmdb
```

## ğŸ”§ å·¥ä½œæµé…ç½®

### ä¿®æ”¹æ‰§è¡Œæ—¶é—´
è¦æ›´æ”¹è‡ªåŠ¨æ‰§è¡Œæ—¶é—´ï¼Œè¯·ç¼–è¾‘ `.github/workflows/update-geolite2.yml` æ–‡ä»¶ä¸­çš„ cron è¡¨è¾¾å¼ï¼š

```yaml
schedule:
  - cron: '0 0 * * 4'  # æ¯å‘¨å›› 00:00 UTC
```

### ä¿®æ”¹ä¿ç•™ç‰ˆæœ¬æ•°é‡
è¦æ›´æ”¹ä¿ç•™çš„ç‰ˆæœ¬æ•°é‡ï¼Œè¯·ä¿®æ”¹æ¸…ç†æ­¥éª¤ä¸­çš„æ•°ç»„ç´¢å¼•ï¼š

```bash
# ä¿ç•™æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬ï¼ˆåˆ é™¤ç¬¬ 4 ä¸ªåŠä»¥åçš„ç‰ˆæœ¬ï¼‰
RELEASES=$(gh release list --json tagName,createdAt --jq 'sort_by(.createdAt) | reverse | .[3:] | .[].tagName')
```

## ğŸ“Š ç›‘æ§å’Œæ•…éšœæ’é™¤

### æŸ¥çœ‹æ‰§è¡ŒçŠ¶æ€
1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾é¡µ
2. æŸ¥çœ‹æœ€è¿‘çš„å·¥ä½œæµè¿è¡Œè®°å½•
3. ç‚¹å‡»å…·ä½“è¿è¡ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### å¸¸è§é—®é¢˜

#### 1. è®¸å¯è¯å¯†é’¥é”™è¯¯
**é”™è¯¯**: `âŒ é”™è¯¯: MAXMIND_LICENSE_KEY æœªè®¾ç½®`
**è§£å†³**: ç¡®ä¿åœ¨ GitHub Secrets ä¸­æ­£ç¡®è®¾ç½®äº† `MAXMIND_LICENSE_KEY`

#### 2. ä¸‹è½½å¤±è´¥
**é”™è¯¯**: `âŒ [æ•°æ®åº“å] ä¸‹è½½å¤±è´¥`
**è§£å†³**: 
- æ£€æŸ¥è®¸å¯è¯å¯†é’¥æ˜¯å¦æœ‰æ•ˆ
- ç¡®è®¤ MaxMind æœåŠ¡çŠ¶æ€
- æ£€æŸ¥ç½‘ç»œè¿æ¥

#### 3. æƒé™é”™è¯¯
**é”™è¯¯**: æ— æ³•åˆ›å»º Release
**è§£å†³**: ç¡®ä¿å·¥ä½œæµå…·æœ‰ `contents: write` æƒé™

## ğŸ”— ç›¸å…³é“¾æ¥

- [MaxMind GeoLite2 æ–‡æ¡£](https://dev.maxmind.com/geoip/geolite2-free-geolocation-data)
- [MaxMind DB æ ¼å¼è§„èŒƒ](https://maxmind.github.io/MaxMind-DB/)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸­çš„å·¥ä½œæµä»£ç é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

GeoLite2 æ•°æ®åº“ç”± MaxMind æä¾›ï¼Œéµå¾ª [MaxMind GeoLite2 è®¸å¯è¯](https://dev.maxmind.com/geoip/geolite2-free-geolocation-data)ã€‚

---

> ğŸ¤– ç”± GitHub Actions è‡ªåŠ¨ç»´æŠ¤å’Œæ‰§è¡Œ